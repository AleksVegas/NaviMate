<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç —Ä–∞—Å—á–µ—Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-case { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 8px; }
        .input { margin: 10px 0; }
        label { display: inline-block; width: 200px; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        .result { margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 4px; }
        .expected { color: #28a745; font-weight: bold; }
        .actual { color: #dc3545; font-weight: bold; }
        .info { color: #17a2b8; }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç —Ä–∞—Å—á–µ—Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏</h1>
    
    <div class="test-case">
        <h3>–¢–µ—Å—Ç: –†–∞—Å—á–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å —É—á–µ—Ç–æ–º –≥—Ä–∞—Ñ–∏–∫–∞</h3>
        <div class="input">
            <label>–ù–∞—á–∞–ª—å–Ω—ã–π –∫–º:</label>
            <input type="number" id="startKm" value="1640">
        </div>
        <div class="input">
            <label>–ö–æ–Ω–µ—á–Ω—ã–π –∫–º:</label>
            <input type="number" id="endKm" value="1660">
        </div>
        <div class="input">
            <label>–í—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞:</label>
            <input type="datetime-local" id="startTime" value="2025-08-28T20:42">
        </div>
        <div class="input">
            <label>–ñ–µ–ª–∞–µ–º–æ–µ –≤—Ä–µ–º—è –ø—Ä–∏–±—ã—Ç–∏—è:</label>
            <input type="datetime-local" id="desiredArrival" value="2025-08-29T07:00">
        </div>
        <div class="input">
            <label>–†–∞–±–æ—á–∏–µ —á–∞—Å—ã:</label>
            <select id="workHours">
                <option value="12" selected>12 —á–∞—Å–æ–≤</option>
                <option value="14">14 —á–∞—Å–æ–≤</option>
                <option value="16">16 —á–∞—Å–æ–≤</option>
                <option value="18">18 —á–∞—Å–æ–≤</option>
                <option value="24">24 —á–∞—Å–∞</option>
            </select>
        </div>
        <button onclick="testSpeedCalculation()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å</button>
        <div id="result" class="result"></div>
    </div>

    <script src="js/arrivalcalc.js"></script>
    <script>
        function testSpeedCalculation() {
            const startKm = parseInt(document.getElementById('startKm').value);
            const endKm = parseInt(document.getElementById('endKm').value);
            const startTimeStr = document.getElementById('startTime').value;
            const desiredArrivalStr = document.getElementById('desiredArrival').value;
            const workHours = parseInt(document.getElementById('workHours').value);
            
            const startTime = new Date(startTimeStr);
            const desiredArrival = new Date(desiredArrivalStr);
            const distance = endKm - startKm;
            
            console.log('=== –¢–ï–°–¢ –†–ê–°–ß–ï–¢–ê –°–ö–û–†–û–°–¢–ò ===');
            console.log(`–°—Ç–∞—Ä—Ç: ${startTime.toLocaleString('ru-RU')}`);
            console.log(`–ü—Ä–∏–±—ã—Ç–∏–µ: ${desiredArrival.toLocaleString('ru-RU')}`);
            console.log(`–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ: ${distance} –∫–º`);
            console.log(`–†–∞–±–æ—á–∏–µ —á–∞—Å—ã: ${workHours}`);
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ–±—â–µ–µ –≤—Ä–µ–º—è
            const totalTimeHours = (desiredArrival - startTime) / 3600000;
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã
            const availableHours = computeWorkingHoursBetween(startTime, desiredArrival, workHours);
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—É—é —Å–∫–æ—Ä–æ—Å—Ç—å
            const requiredSpeed = distance / totalTimeHours;
            
            const result = document.getElementById('result');
            result.innerHTML = `
                <div><strong>–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:</strong></div>
                <div>–°—Ç–∞—Ä—Ç: ${startTime.toLocaleString('ru-RU')}</div>
                <div>–ü—Ä–∏–±—ã—Ç–∏–µ: ${desiredArrival.toLocaleString('ru-RU')}</div>
                <div>–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ: ${distance} –∫–º</div>
                <div>–†–∞–±–æ—á–∏–µ —á–∞—Å—ã: ${workHours}</div>
                <br>
                <div><strong>–†–∞—Å—á–µ—Ç—ã:</strong></div>
                <div class="info">–û–±—â–µ–µ –≤—Ä–µ–º—è: ${totalTimeHours.toFixed(2)} —á</div>
                <div class="info">–î–æ—Å—Ç—É–ø–Ω–æ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤: ${availableHours.toFixed(2)} —á</div>
                <div class="actual">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å: ${requiredSpeed.toFixed(2)} –∫–º/—á</div>
                <br>
                <div><strong>–ê–Ω–∞–ª–∏–∑:</strong></div>
                <div>${availableHours >= totalTimeHours ? '‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤' : '‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤'}</div>
                <div>${requiredSpeed >= 0.1 && requiredSpeed <= 100 ? '‚úÖ –°–∫–æ—Ä–æ—Å—Ç—å –≤ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö' : '‚ùå –°–∫–æ—Ä–æ—Å—Ç—å –≤–Ω–µ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø—Ä–µ–¥–µ–ª–æ–≤'}</div>
            `;
        }
    </script>
</body>
</html>