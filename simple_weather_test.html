<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –ø–æ–≥–æ–¥—ã</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 8px; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        .result { margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 4px; }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .info { color: #17a2b8; }
    </style>
</head>
<body>
    <h1>üå§Ô∏è –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –ø–æ–≥–æ–¥—ã</h1>
    
    <div class="test-section">
        <h3>–¢–µ—Å—Ç API OpenWeatherMap</h3>
        <p>–≠—Ç–æ—Ç —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª–∏ API –¥–∞–Ω–Ω—ã–µ –æ –ø–æ—Ä—ã–≤–∞—Ö –≤–µ—Ç—Ä–∞.</p>
        <button onclick="testWeatherApi()">–¢–µ—Å—Ç API</button>
        <div id="apiResult" class="result"></div>
    </div>
    
    <div class="test-section">
        <h3>–¢–µ—Å—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</h3>
        <p>–≠—Ç–æ—Ç —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ—Ä—ã–≤—ã –≤–µ—Ç—Ä–∞.</p>
        <button onclick="testDisplay()">–¢–µ—Å—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</button>
        <div id="displayResult" class="result"></div>
    </div>

    <script>
        async function testWeatherApi() {
            const result = document.getElementById('apiResult');
            result.innerHTML = '<span class="info">‚è≥ –¢–µ—Å—Ç–∏—Ä—É–µ–º API...</span>';
            
            try {
                // –¢–µ—Å—Ç–æ–≤—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (–í–µ–Ω–∞)
                const lat = 48.2082;
                const lon = 16.3738;
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π API –∫–ª—é—á –¥–ª—è —Ç–µ—Å—Ç–∞ (–º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å)
                const apiKey = 'test_key'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –∫–ª—é—á
                const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric&lang=ru`;
                
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                
                result.innerHTML = `
                    <span class="success">‚úÖ API –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω!</span><br>
                    <strong>–ì–æ—Ä–æ–¥:</strong> ${data.name}<br>
                    <strong>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:</strong> ${data.main.temp}¬∞C<br>
                    <strong>–í–µ—Ç–µ—Ä:</strong> ${data.wind.speed} –º/—Å<br>
                    <strong>–ü–æ—Ä—ã–≤—ã:</strong> ${data.wind.gust ? data.wind.gust + ' –º/—Å' : '–ù–ï–¢ –î–ê–ù–ù–´–•'}<br>
                    <strong>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</strong> ${data.wind.deg}¬∞<br>
                    <br>
                    <strong>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ wind:</strong><br>
                    <pre>${JSON.stringify(data.wind, null, 2)}</pre>
                `;
            } catch (e) {
                result.innerHTML = `
                    <span class="error">‚ùå –û—à–∏–±–∫–∞ API: ${e.message}</span><br>
                    <br>
                    <strong>–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:</strong><br>
                    1. API –∫–ª—é—á –Ω–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç<br>
                    2. –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤<br>
                    3. –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é<br>
                    <br>
                    <strong>–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</strong><br>
                    –ó–∞–º–µ–Ω–∏—Ç–µ 'test_key' –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API –∫–ª—é—á OpenWeatherMap
                `;
            }
        }
        
        function testDisplay() {
            const result = document.getElementById('displayResult');
            
            // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
            const testData = {
                wind: {
                    speed: 5.2,
                    deg: 180,
                    gust: 8.1
                }
            };
            
            // –¢–µ—Å—Ç–∏—Ä—É–µ–º –ª–æ–≥–∏–∫—É –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            let html = '<strong>–¢–µ—Å—Ç –ª–æ–≥–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:</strong><br>';
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ø–æ—Ä—ã–≤–æ–≤
            html += `<span class="info">data.wind.gust = ${testData.wind.gust}</span><br>`;
            
            if (testData.wind.gust) {
                html += `<span class="success">‚úÖ –ü–æ—Ä—ã–≤—ã –Ω–∞–π–¥–µ–Ω—ã</span><br>`;
                
                // –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–µ—Ä–µ–≤–æ–¥
                const translations = {
                    ru: { windGust: "–ü–æ—Ä—ã–≤—ã:" },
                    en: { windGust: "Gusts:" }
                };
                
                const lang = 'ru';
                const gustText = translations[lang]?.windGust || 'windGust';
                html += `<span class="success">‚úÖ –ü–µ—Ä–µ–≤–æ–¥: "${gustText}"</span><br>`;
                
                // –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç
                const windUnit = '–º/—Å';
                const displayText = `${gustText} ${testData.wind.gust} ${windUnit}`;
                html += `<span class="success">‚úÖ –¢–µ–∫—Å—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è: "${displayText}"</span><br>`;
                
            } else {
                html += `<span class="error">‚ùå –ü–æ—Ä—ã–≤—ã –ù–ï –Ω–∞–π–¥–µ–Ω—ã</span><br>`;
            }
            
            result.innerHTML = html;
        }
    </script>
</body>
</html>